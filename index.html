<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiteraTeia - Grupo de Leitura</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="hero">
        <div class="container">
            <h1>LiteraTeia</h1>
            <p>Um clube de leitura onde exploramos histórias que desafiam a mente, mergulhamos em universos complexos e discutimos temas profundos, sempre buscando expandir nossa visão do mundo.</p>
        </div>
    </div>

    <div class="container">
        <section class="book-section">
            <div class="carousel">
                <div class="carousel-inner">
                    <!-- Primeiro Livro -->
                    <div class="carousel-item">
                        <div class="book-cover">
                            <img src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1353607889i/6901098.jpg" alt="Meridiano de Sangue">
                        </div>
                        <div class="book-info">
                            <h2>Meridiano de Sangue</h2>
                            <p>Na nossa segunda leitura no clube LiteraTeia, Meridiano de Sangue nos leva a uma jornada brutal pelo Oeste americano, explorando a violência humana e os limites da civilização.</p>
                            <h3>Sinopse</h3>
                            <p>Neste livro o leitor acompanha um rapaz sem nome e sem família, abandonado à própria sorte num mundo brutal em que, para sobreviver, precisa ser tão ou mais violento que seus inimigos. Recrutado por uma companhia de mercenários a serviço de governantes locais, atravessa regiões desérticas entre o México e o Texas da metade do século XIX com a missão de matar o maior número possível de índios e trazer de volta seus escalpos.</p>
                            <a href="#" class="cta-button" id="current-book-btn">Explorar o Livro</a>
                        </div>
                    </div>

                    <!-- Segundo Livro -->
                    <div class="carousel-item">
                        <div class="book-cover">
                            <img src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1541890010i/6464663.jpg" alt="Watchmen">
                        </div>
                        <div class="book-info">
                            <h2>Watchmen</h2>
                            <p>Iniciamos o Cine HQ explorando o impacto dos super-heróis na sociedade. Watchmen é uma narrativa complexa e visualmente impactante que redefine os quadrinhos como forma de arte.</p>
                            <h3>Sinopse</h3>
                            <p>Considerado uma obra-prima dos quadrinhos, Watchmen mergulha na psique de seus personagens e nas consequências de seus atos em um mundo à beira da guerra nuclear. O ano é 1985. Os Estados Unidos são uma nação totalitária e fechada, isolada do resto do mundo. A presença de arsenais nucleares e dos chamados super-heróis mantém um certo equilíbrio entre as forças do planeta... até que o relógio do fim do mundo começa a marchar para a meia-noite e a raça humana para um abismo sem-fim.</p>
                            <a href="#" class="cta-button">Explorar o Livro</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Indicadores do Carrossel -->
        <div class="carousel-indicators">
            <span class="indicator" data-slide="0"></span>
            <span class="indicator" data-slide="1"></span>
        </div>

        <h2 style="text-align: center; margin-bottom: 1rem; color: var(--primary-color);">Livros Anteriores</h2>
        <div class="past-books">
            <div class="past-book" data-title="O Lobo da Estepe" data-synopsis="Harry Haller, um intelectual solitário, navega entre dois mundos: o da razão civilizada e o do instinto selvagem. Neste romance extraordinário de Hermann Hesse, somos convidados a explorar as contradições internas do ser humano, suas lutas íntimas e a busca por significado em um mundo que parece não compreendê-lo." data-image="https://m.media-amazon.com/images/I/71kxa1-0mUL._SL1500_.jpg">
                <img src="https://m.media-amazon.com/images/I/812qwlotv+L._SL1500_.jpg" alt="Capa de O Lobo da Estepe">
                <p>O Lobo da Estepe</p>
            </div>
        </div>
    </div>

    <!-- Modal for Book Details -->
    <div id="bookModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-book-title"></h2>
            <img id="modal-book-image" src="" alt="" style="width: 200px; display: block; margin: 1rem auto;">
            <p id="modal-book-synopsis"></p>
            
            <h3>Avaliações dos Participantes</h3>
            <div id="book-reviews"></div>
        </div>
    </div>

    <!-- Modal for Current Book Schedule -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Cronograma de Leitura - Meridiano de Sangue</h2>
            <div class="reading-schedule">
                <h3>Próximo Encontro</h3>
                <p><strong>Data:</strong> 20 de Dezembro de 2024</p>
                <p><strong>Hora:</strong> 15:30</p>
                <p><strong>Local:</strong> Discord - Canal Teia Studios - Sala Créu</p>
                <p><strong>Capítulos:</strong> Capítulo 5</p>
                <p><strong>Meta Atual:</strong> Iniciar Leitura</p>
            </div>
        </div>
    </div>

    <!-- Modal for Watchmen Book Schedule -->
    <div id="watchmenScheduleModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Cronograma de Leitura - Watchmen</h2>
            <div class="reading-schedule">
                <h3>Próximo Encontro</h3>
                <p><strong>Data:</strong> 20 de Dezembro de 2024</p>
                <p><strong>Hora:</strong> 16:00</p>
                <p><strong>Local:</strong> Discord - Canal Teia Studios - Sala Quadrinhos</p>
                <p><strong>Capítulos:</strong> Capítulo 1 e 2</p>
                <p><strong>Meta Atual:</strong> Iniciar Discussão sobre Arco Narrativo</p>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2024 LiteraTeia - Só para os loucos</p>
    </footer>

    <script>
        // Função para desativar a rolagem da página
        function disableScroll() {
            document.body.style.overflow = 'hidden';
        }
    
        // Função para ativar a rolagem da página
        function enableScroll() {
            document.body.style.overflow = '';
        }
    
        // Função genérica para configurar modais
        function setupModal(modalTrigger, modal, closeButton) {
            // Abrir modal
            modalTrigger.addEventListener('click', function(e) {
                e.preventDefault();
                modal.style.display = 'block';
                disableScroll();
            });
    
            // Fechar modal ao clicar no botão de fechar
            closeButton.addEventListener('click', function() {
                modal.style.display = 'none';
                enableScroll();
            });
    
            // Fechar modal ao clicar fora dele
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    enableScroll();
                }
            });
        }
    
        // Dados de avaliações dos livros
        const bookReviews = {
            'O Lobo da Estepe': [
                { name: 'Alex', rating: 4, comment: 'É uma experiência muito imersiva na vida do personagem. O autor coerentemente com a personalidade do protagonista, vaga por diversas outras obras de autores famosos da literatura, além de músicos clássicos. Devido à dualidade que enfrenta o Harry Haller, propõe reflexões muito densas sobre as multifacetadas perspectivas que se pode ter de si mesmo e da sociedade. Tem um final muito interessante, algo que me pegou desprevenido, esperei muitas coisas, exceto a conclusão que teve. Valeu a pena ler, pretendo olhar mais obras desse cabra.' },
                { name: 'Ivan', rating: 3.5, comment: '' },
                { name: 'Moises', rating: 5, comment: '' },
                { name: 'Natal', rating: 3.5, comment: 'Apesar de achar o meio do livro um pouco mais cansativo de ler, fui surpreendido com a leitura no geral. Acompanhado de um grupo dei leitura, acompanhar o personagem desse livro foi uma experiência interessante.' }
            ],
        };
    
        // Seleciona todos os livros anteriores
        const pastBooks = document.querySelectorAll('.past-book');
    
        // Modal para exibir detalhes dos livros anteriores
        const bookModal = document.getElementById('bookModal');
        const closeBookModal = bookModal.querySelector('.close');
    
        // Adiciona evento de clique para exibir informações no modal de livros anteriores
        pastBooks.forEach(book => {
            book.addEventListener('click', function() {
                const title = this.getAttribute('data-title');
                const synopsis = this.getAttribute('data-synopsis');
                const image = this.getAttribute('data-image');
    
                // Preenche o modal com os detalhes
                document.getElementById('modal-book-title').textContent = title;
                document.getElementById('modal-book-image').src = image;
                document.getElementById('modal-book-synopsis').textContent = synopsis;
    
                // Busca as avaliações do livro clicado
                const reviews = bookReviews[title] || [
                    { name: 'Sem Avaliações', rating: 0, comment: 'Não há avaliações disponíveis para este livro.' }
                ];
    
                // Renderiza as avaliações no modal
                const reviewsContainer = document.getElementById('book-reviews');
                reviewsContainer.innerHTML = reviews.map(review => `
                    <div class="review">
                        <strong>${review.name}</strong> - Nota: ${review.rating}/5
                        <p>${review.comment}</p>
                    </div>
                `).join('');
            });
        });
    
        // Modal de cronograma de leitura
        const currentBookBtn = document.getElementById('current-book-btn');
        const scheduleModal = document.getElementById('scheduleModal');
        const closeScheduleModal = scheduleModal.querySelector('.close');

        const watchmenBookBtn = document.querySelector('.carousel-item:nth-child(2) .cta-button');
        const watchmenScheduleModal = document.getElementById('watchmenScheduleModal');
        const closeWatchmenScheduleModal = watchmenScheduleModal.querySelector('.close');

        // Setup modal
        [
            { trigger: pastBooks[0], modal: bookModal, close: closeBookModal },
            { trigger: currentBookBtn, modal: scheduleModal, close: closeScheduleModal },
            { trigger: watchmenBookBtn, modal: watchmenScheduleModal, close: closeWatchmenScheduleModal }
        ].forEach(({ trigger, modal, close }) => setupModal(trigger, modal, close));
    
        // Carrossel
        const carouselInner = document.querySelector('.carousel-inner');
        const indicators = document.querySelectorAll('.indicator');
        let currentIndex = 0;

        // Função para atualizar o carrossel e as bolinhas
        function updateCarousel(index) {
            currentIndex = index;
            carouselInner.style.transform = `translateX(-${currentIndex * 100}%)`;

            // Atualiza as bolinhas
            indicators.forEach((indicator, i) => {
                if (i === currentIndex) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });
        }

        // Adiciona o evento de clique nas bolinhas
        indicators.forEach(indicator => {
            indicator.addEventListener('click', function() {
                const slideIndex = parseInt(this.getAttribute('data-slide'));
                updateCarousel(slideIndex);
            });
        });

        // Atualiza a bolinha ativa na inicialização
        updateCarousel(currentIndex);

        // Suporte a gestos de arraste (swipe)
        let touchStartX = 0;
        let touchEndX = 0;

        carouselInner.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        carouselInner.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchStartX - touchEndX > 50) {
                // Swipe para a esquerda (avançar)
                if (currentIndex < indicators.length - 1) {
                    updateCarousel(currentIndex + 1);
                }
            } else if (touchEndX - touchStartX > 50) {
                // Swipe para a direita (voltar)
                if (currentIndex > 0) {
                    updateCarousel(currentIndex - 1);
                }
            }
        }
    
        // Configurar modais usando a função genérica
        setupModal(
            pastBooks[0], // primeiro livro anterior como trigger
            bookModal, 
            closeBookModal
        );
    </script>
</body>
</html>